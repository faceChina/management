Ext.namespace("Ext.ux.plugins");Ext.ux.plugins.PageComboResizer=Ext.extend(Object,{pageSizes:[5,10,15,20,30,50],prefixText:"每页显示 ",postfixText:"记录",constructor:function(b){Ext.apply(this,b);Ext.ux.plugins.PageComboResizer.superclass.constructor.call(this,b);},init:function(e){var g=this.pageSizes;var h=new Ext.form.ComboBox({typeAhead:true,triggerAction:"all",lazyRender:true,mode:"local",width:45,store:g,listeners:{select:function(a,d,l){e.pageSize=g[l];var b=0;var i=e.findParentBy(function(k,j){return(k instanceof Ext.grid.GridPanel)?true:false;});var c=i.getSelectionModel();if(undefined!=c&&c.hasSelection()){if(c instanceof Ext.grid.RowSelectionModel){b=i.store.indexOf(c.getSelected());}else{if(c instanceof Ext.grid.CellSelectionModel){b=c.getSelectedCell()[0];}}}b+=e.cursor;e.doLoad(Math.floor(b/e.pageSize)*e.pageSize);}}});Ext.iterate(this.pageSizes,function(a){if(a==e.pageSize){h.setValue(a);return;}});var f=e.items.indexOf(e.refresh);e.insert(++f,"-");e.insert(++f,this.prefixText);e.insert(++f,h);e.insert(++f,this.postfixText);e.on({beforedestroy:function(){h.destroy();}});}});